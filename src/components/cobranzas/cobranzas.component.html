
<div class="container mx-auto animate-fade-in">
    <!-- Header -->
    <div class="flex justify-between items-center mb-6">
        <div>
            <h3 class="text-2xl font-semibold text-gray-700 dark:text-gray-200">Generación de Cupones y Cobranzas</h3>
            <p class="text-gray-500 dark:text-gray-400 mt-1">Emita cupones mensuales y controle la morosidad.</p>
        </div>
        <button (click)="generarCupones()" class="px-6 py-2.5 bg-green-600 text-white font-medium text-sm rounded-lg hover:bg-green-700 focus:outline-none focus:ring-4 focus:ring-green-300 transition-all duration-300 ease-in-out shadow-md hover:shadow-lg flex items-center">
            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h5M5 5a9 9 0 0014 0M19 9h5V4M19 19a9 9 0 00-14 0"></path></svg>
            Generar Cupones Mensuales
        </button>
    </div>

    <!-- Table -->
     <div class="bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden">
        <div class="overflow-x-auto">
            <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
                <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                    <tr>
                        <th scope="col" class="px-6 py-3">Socio</th>
                        <th scope="col" class="px-6 py-3">Período</th>
                        <th scope="col" class="px-6 py-3">Vencimiento</th>
                        <th scope="col" class="px-6 py-3">Importe</th>
                        <th scope="col" class="px-6 py-3">Estado</th>
                        <th scope="col" class="px-6 py-3 text-right">Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    @for (cupon of cuponesEnriquecidos(); track cupon.id) {
                    <tr class="bg-white dark:bg-gray-800 border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600">
                        <td class="px-6 py-4 font-medium text-gray-900 dark:text-white">{{ cupon.nombreSocio }} (N° {{cupon.idSocio}})</td>
                        <td class="px-6 py-4">{{ cupon.mes }}/{{ cupon.anio }}</td>
                        <td class="px-6 py-4">{{ cupon.fechaVencimiento }}</td>
                        <td class="px-6 py-4">${{ cupon.importeTotal }}</td>
                        <td class="px-6 py-4">
                            @if(cupon.estado === 'Pagado') {
                                <span class="px-2 py-1 text-xs font-semibold text-green-800 bg-green-100 rounded-full">Pagado</span>
                            } @else if (cupon.estado === 'Impago') {
                                <span class="px-2 py-1 text-xs font-semibold text-yellow-800 bg-yellow-100 rounded-full">Impago</span>
                            } @else {
                                <span class="px-2 py-1 text-xs font-semibold text-red-800 bg-red-100 rounded-full">Vencido</span>
                            }
                        </td>
                        <td class="px-6 py-4 text-right">
                           @if(cupon.estado !== 'Pagado') {
                                <button (click)="reemitirConRecargo(cupon)" class="font-medium text-blue-600 dark:text-blue-500 hover:underline">Re-emitir con 5%</button>
                           } @else {
                                <span class="text-gray-400 dark:text-gray-500">-</span>
                           }
                        </td>
                    </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>
